<html>
<head><title>Documentation and Tests</title>

   <link rel="stylesheet" href="style.css" type="text/css" />
   <script src="../MochiKit/MochiKit.js" type="text/javascript" ></script>
   <script src="../GraphElements.js" type="text/javascript" ></script>
   <script src="../TGGraphLayout.js" type="text/javascript" ></script>
</head>
<body>
<h1>Documentation and Tests</h1>

<p><b>GraphNode</b><br />
<script type="text/javascript">
<!--
    t0=new Date();
    //GraphNode
    gn=new GraphNode();
    node=gn.init();
    document.write('node=gn.init(); initial values:<br />');
    for (prop in node) {
         document.write(prop+' : '+node[prop]+', ');
    }
    document.write('<br />Testing gn.getXY(node).x: '+gn.getXY(node).x+'<br />');
    document.write('Testing gn.getDxy(node).dx: '+gn.getDxy(node).dx+'<br />');
    gn.setDxy(node, {dx:5,dy:10});
    document.write('Testing dx for gn.setDxy(node,{dx:5,dy:10}): '+gn.getDxy(node).dx+'<br />');

    //GraphUtils
    nodes=[node, gn.init({x:20,y:20}), gn.init({x:30,y:30})];
    document.write('<b>GraphUtils</b><br />'+nodes.length+'=Length<br />');
    np=GraphUtils.nodePairIter(nodes);
    i=MochiKit.Iter;
    forEach(np,function(pair){document.write(pair[1].x+'; ')});
    document.write('=combinations of 2 for length<br />');

    //GraphEdge
    var ge=new GraphEdge();
    document.write('<b>GraphEdge</b><br />');
    edges=[{p:nodes[0],q:nodes[1]}, 
           {p:nodes[0],q:nodes[2]}];
    ie=iter(edges);
    forEach(ie,function(e){ge.init(e);document.write(e.q.x+'; ');});
    document.write('=20; 30;<br />');
    
    /*** TGLayout ***/
    document.write('<b>TGGraphLayout</b><br />stress: test points: <br /><i>Before</i>: ');
    inodes=iter(nodes);
    forEach(inodes,function(n){document.write(n.x+','+n.y+'; ')});

    ie=iter(edges);
    np=GraphUtils.nodePairIter(nodes);
    tgl=new TGGraphLayout(gn);
    tgl.stress(ie,np);

    document.write('<br /> <i>After</i> dXY: ');
    inodes=iter(nodes);
    forEach(inodes,function(n){document.write(n.dx+','+n.dy+'; ')});


    document.write('<br />updateNodeCoords: test points: :');
    tgl.updateNodeCoords(iter(nodes));
    forEach(iter(nodes),function(n){document.write(n.x+';')});

    document.write('<br />relax: test points: :');
    ie=iter(edges);
    np=GraphUtils.nodePairIter(nodes);
    tgl.relax(ie,np,iter(nodes));
    forEach(iter(nodes),function(n){document.write(n.x+';')});
    t9=new Date();
    dt=t9.getTime()-t0.getTime();
    document.write('<br />milliseconds so far: '+dt);


-->
</script>
</p>
<a name="classes"></a>
<h3>Class summary</h3>
<pre>var init_url='someGraph.json';
svgdoc=document.embeds['svg'].getSVGDocument();
graphVC=new SvgGraph.Elements.Simple(svgdoc,'nodes');
gIsomorph=new RayChainHybrid(graphVC);
gModel=new GraphUtils.Labels(gIsomorph, graphVC);
var def=loadJSONDoc(init_url);
gModel.loadJSON(def);</pre>

<ul>
  <li>graphVC (SvgGraph.Elements.Simple)
  <ul>
    <li>.svgdoc</li>
    <li>.target</li>
    <li>.nodeModel
    <ul><li>.init</li></ul>
    </li>
    <li>.edgeModel</li>
    <li>.graphs[]</li>
    <li>.centerGraph()</li>
    <li>.addGraph(graph)</li>
  </ul>
  </li>
  <li>graph (RayChainHybrid)
  <ul>
    <li>.addNodes(node_array)</li>
    <li>.addEdges(edge_array)</li>
    <li>.addChains(chain_array)</li>
    <li>.relax()</li>
    <li>.toggleNodeView(n)</li>
    <li>.getNodes()</li>
    <li>._unRelatedNodePairs()</li>
    <li>._chainEdgeIter</li>
    <li>.getNodeEdges
        <ul>
	  <li>.relax(node,relations /* if you want the p's and q's then send { p:[] , q:[] }*/)</li>
	  <li>.model(n,r)</li>
	  <li>.visible(n,r)</li>
	</ul>
    </li>
  </ul>
  </li>
  <li>model (GraphUtils.Labels)
  <ul>
    <li>.graph</li>
    <li>.graphVC</li>
    <li>.loadJSON(deferred)</li>
    <li>.loadTouchGraph(deferred)</li>
  </ul>
  </li>
</ul>

</body>